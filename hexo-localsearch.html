<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=1,minimum-scale=1,maximum-scale=1"><link rel="shortcut icon" href="/favicon.png"><link rel="apple-itouch-icon" href="/favicon.png"><style>img{max-width:100%}</style><style type="text/css">.box{display:none;position:fixed;right:10px;bottom:34px;height:30px;width:50px;text-align:center;padding-top:20px;background-color:#b7b7b7;opacity:.58;border-radius:25px;overflow:hidden;cursor:pointer}.box:hover:before{top:50%}.box:hover .box-in{visibility:hidden}.box:before{position:absolute;top:-50%;left:50%;transform:translate(-50%,-50%);width:40px;color:peru;font-weight:700}.box-in{visibility:visible;display:inline-block;height:20px;width:20px;border:3px solid #000;border-color:#fff transparent transparent #fff;transform:rotate(45deg)}</style><link rel="stylesheet" href="/bundle/index.css" media="none" onload='"all"!=media&&(media="all")'><script type="text/javascript">var timeSinceLang={year:"年前",month:"个月前",day:"天前",hour:"小时前",minute:"分钟前",second:"秒前"},root=""</script><meta name="keywords" content="hexo,github,search,"><meta name="description" content="实现 Hexo next 主题博客本地站内搜索"><title>实现 Hexo next 主题博客本地站内搜索</title></head><body><article class="container"><header class="header-wrap"><a class="index" href="/"><img class="logo" src="/images/avatar.png"> True Me</a><ul class="menu"><li class="menu-item"><a href="/archive.html">归档</a></li><li class="menu-item"><a href="/tag.html">标签</a></li><li class="menu-item"><a target="_blank" href="/essay">随笔</a></li><li class="menu-item"><a href="/about.me.html">关于</a></li><li class="menu-item"><a href="/atom.xml">订阅</a></li></ul></header><article class="main article"><h1 class="title">实现 Hexo next 主题博客本地站内搜索</h1><section class="info"><span class="avatar" style="background-image:url(/images/avatar.png)"></span> <a class="name" href="/about.me.html">Zetao Yang</a> <span class="date" data-time="1467960585"><span class="from"></span> 更新</span> <span class="tags"><a class="tag" href="/tag/hexo/index.html">hexo</a><a class="tag" href="/tag/github/index.html">github</a><a class="tag" href="/tag/search/index.html">search</a></span></section><article class="content"><p>一、要使用搜索，必须先生成博客索引数据，Hexo 可以通过下面的这个插件生成：</p><pre><code>npm install hexo-generator-search --save

</code></pre><p>二、只需要在 Hexo 站点 _config.yml 中添加如下配置即可：</p><pre><code>search:
  path: search.xml
  field: post
</code></pre><ul><li><strong>path</strong> - file path. Default is <code>search.xml</code> .</li><li><strong>field</strong> - the search scope you want to search, you can chose:<ul><li><strong>post</strong> (Default) - will only covers all the posts of your blog.</li><li><strong>page</strong> - will only covers all the pages of your blog.</li><li><strong>all</strong> - will covers all the posts and pages of your blog.</li></ul></li></ul><p>更多配置说明可到插件页面查看：<a href="https://github.com/PaicHyperionDev/hexo-generator-search">hexo-generator-search</a></p><p>三、然后在 themes/next/layout/_partials/search 目录下修改 localsearch.swig 文件。<br>原始文件内容如下：</p><pre><code class="language-javascript"> &lt;script type=&quot;text/javascript&quot;&gt;
     var search_path = &quot;&lt;%= config.search.path %&gt;&quot;;
     if (search_path.length == 0) {
     	search_path = &quot;search.xml&quot;;
     }
     var path = &quot;&lt;%= config.root %&gt;&quot; + search_path;
     searchFunc(path, 'local-search-input', 'local-search-result');
 &lt;/script&gt;
</code></pre><p>修改后的文件内容为:</p><pre><code class="language-html">&lt;div class=&quot;popup&quot;&gt;
 &lt;span class=&quot;search-icon fa fa-search&quot;&gt;&lt;/span&gt;
 &lt;input type=&quot;text&quot; id=&quot;local-search-input&quot; placeholder=&quot;search my blog...&quot;&gt;
 &lt;div id=&quot;local-search-result&quot;&gt;&lt;/div&gt;
 &lt;span class=&quot;popup-btn-close&quot;&gt;close&lt;/span&gt;
&lt;/div&gt;
</code></pre><p>其他的地方都不需要改，这样 Hexo 本地站内搜索就完成了。</p></article><section class="author"><div class="avatar" style="background-image:url(/images/avatar.png)"></div><a class="name" href="/about.me.html">Zetao Yang</a><div class="intro">Thoughts and ideas.</div></section><section class="recommend"><section class="nav prev"><div class="head">上篇文章</div><a class="link" href="/hexo-ssh-key.html">使用 Github ssh key 部署 Hexo 博客</a></section></section><section id="disqus_thread"></section><script type="text/javascript">!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//zetao.disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()</script></article></article><footer class="footer"><span class="copyright">True Me ©<script type="text/javascript">document.write((new Date).getFullYear())</script>- Zetao的小站 </span><span class="publish">本站使用<a href="http://creativecommons.org/licenses/by/4.0/deed.zh">「署名 4.0 国际」</a>创作共享协议</span></footer><div id="to-top" class="box"><div class="box-in"><div><div><script>window.onscroll=function(){var o=document.documentElement.scrollTop||document.body.scrollTop,e=document.documentElement.clientHeight||document.body.clientHeight;a.style.display=o>e?"block":"none"};var a=document.getElementById("to-top");a.onclick=function(){var o=500,e=10,n=document.documentElement.scrollTop||document.body.scrollTop,t=n/o*e,c=window.setInterval(function(){var o=document.documentElement.scrollTop||document.body.scrollTop;0==o&&window.clearInterval(c),document.documentElement.scrollTop=o-t,document.body.scrollTop=o-t},e);return!1}</script><script src="/bundle/index.js"></script></div></div></div></div></body></html>